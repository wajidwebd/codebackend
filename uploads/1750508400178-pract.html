<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form id="formtag">
        <input type="text" id="promptdata">
        <button type="submit" id="send">send</button>
    </form>

    <script>
        let formtag = document.getElementById("formtag");
        let promptdata = document.getElementById("promptdata");
        let send = document.getElementById("send");
        let chatHistory = [];

        const API_KEY = 'AIzaSyBZByIz2aqMiUHG0OCIlix-_yVZ6bHRcrM';
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;

        formtag.addEventListener("submit",async(e)=>{
            e.preventDefault();
            const promptremove= promptdata.value.trim().toLowerCase();
            if(!promptremove) return;
            chatHistory.push({
                role:'user',
                parts:[{text:promptremove}]
            })
            const controller = new AbortController()
            try {
                fetch(API_URL,{
                    method:'POST',
                    headers:{"Content-Type":"application/json"},
                    body:JSON.stringify({contents:chatHistory}),
                    signal:controller.signal
                }).then((res)=>res.json()).then((data)=>{
                    console.log(data);
                    
                })
            } catch (error) {
                console.log(error);
                
            }
        })



    </script>
</body>
</html>